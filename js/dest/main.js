/*2015-12-15 */
define("../js/dest/main",["./view","../lib/jquery-2.1.4.js","./player","./bullet","./common.js","./enemy"],function(a){var b=a("./view"),c=new b("#container");c.render()}),define("../js/dest/view",["../lib/jquery-2.1.4.js","./player","./bullet","./common.js","./enemy"],function(a,b,c){function d(a){this.container=e(a),this.startBtn=e("#start"),this.scoreSpan=e("#score"),this.height=this.container.height(),this.width=this.container.width(),this.enemys=[],this.bullets=[],this.score=0,this.failed=!1}var e=a("../lib/jquery-2.1.4"),f=a("./player"),g=(a("./bullet"),a("./enemy"));c.exports=d,d.prototype.makeEnemy=function(){var a=new g(this);this.enemys.push(a),time=1e3*(.5+2*Math.random());var b=this;setTimeout(function(){!b.failed&&b.makeEnemy()},time)},d.prototype.render=function(){var a=this;this.startBtn.on("click",function(){a.startBtn.hide(),a.start()})},d.prototype.start=function(){this.enemys=[],this.bullets=[],this.score=0,this.failed=!1,this.player=new f(this),this.makeEnemy(),this.refresh()},d.prototype.refresh=function(){var a=0,b=this;b.refreshInter=setInterval(function(){a++,b.container.css("background-position-y",a+"px"),b.score++,b.scoreSpan.text(b.score)},60)},d.prototype.gameOver=function(){this.failed=!0,this.container.children().hide(),this.player.destroy();for(var a=this.enemys,b=this.bullets,c=0;c<a.length;c++)a[c].ele&&a[c].destroy();for(var c=0;c<b.length;c++)b[c].ele&&b[c].destroy();clearInterval(this.refreshInter),this.startBtn.show()}}),define("../js/dest/player",["../lib/jquery-2.1.4.js","./bullet","./common.js"],function(a,b,c){function d(a){this.view=a,this.ele=e("<div id='player'></div>"),this.view.container.append(this.ele),this.width=this.ele.width(),this.height=this.ele.height(),this.x=(this.view.width-this.width)/2,this.y=this.view.height-this.height,this.ele.css({left:this.x+"px",top:this.y+"px"}),this.move=!1,this.bindEvent(),this.shot()}var e=a("../lib/jquery-2.1.4"),f=a("./bullet");d.prototype.shot=function(){var a=this;this.shotInter=setInterval(function(){var b=new f(a);a.view.bullets.push(b)},200)},d.prototype.destroy=function(){clearInterval(this.shotInter),this.ele.remove(),e("body").off("touchmove").off("touchend"),this.ele=null},d.prototype.bindEvent=function(){var a=this;this.ele.on("touchstart",function(){a.move=!0}),e("body").on("touchmove",function(){if(window.event.preventDefault(),a.move){var b=window.event,c=b.touches[0].clientX-a.width/2,d=b.touches[0].clientY-a.height/2;0>c?c=0:c>a.view.width-a.width&&(c=a.view.width-a.width),0>d?d=0:d>a.view.height-a.height&&(d=a.view.height-a.height),a.x=c,a.y=d,a.ele.css({left:c+"px",top:d+"px"})}}).on("touchend",function(){a.move=!1})},c.exports=d}),define("../js/dest/bullet",["../lib/jquery-2.1.4.js","./common.js"],function(a,b,c){function d(a){this.player=a,this.ele=e("<p class='bullet'></p>"),this.player.view.container.append(this.ele),this.width=this.ele.width(),this.height=this.ele.height(),this.x=a.x+a.width/2-this.width/2,this.y=a.y-this.height,this.ele.css({left:this.x+"px",top:this.y+"px",display:"block"}),this.speed=10,this.fly()}var e=a("../lib/jquery-2.1.4"),f=a("./common");d.prototype.fly=function(){var a=this;this.flyInter=setInterval(function(){if(a.y=a.y-a.speed,a.ele.css({top:a.y+"px"}),a.y+a.height<=0)a.destroy();else for(var b=a.player.view.enemys,c=0;c<b.length;)if(null!=b[c].ele){if(f.isCollision(b[c],a)&&(b[c].health--,a.destroy(),0==b[c].health)){b[c].destroy();break}c++}else b.splice(c,1)},30)},d.prototype.destroy=function(){clearInterval(this.flyInter),this.ele.remove(),this.ele=null},c.exports=d}),define("../js/dest/common",[],function(a,b,c){var d={};return d.isCollision=function(a,b){return a.x-b.width<b.x&&a.x+a.width>b.x&&b.y>a.y-b.height&&b.y<a.y+a.height?!0:!1},d}),define("../js/dest/enemy",["../lib/jquery-2.1.4.js","./common.js"],function(a,b,c){function d(a){this.view=a;var b=Math.floor(Math.random()*ENEMYS.length),c=ENEMYS[b];this.ele=e("<p class='enemy'></p>"),this.view.container.append(this.ele),this.width=c.width,this.height=c.height,this.x=Math.random()*this.view.width-this.width,this.x=this.x<0?0:this.x,this.y=0-this.height,this.ele.css({left:this.x+"px",top:this.y+"px",width:this.width,height:this.height,"background-color":c.color,display:"block"}),this.speed=c.speed,this.score=c.score,this.health=c.health,this.fly()}var e=a("../lib/jquery-2.1.4"),f=a("./common");d.prototype.fly=function(){var a=this;this.flyInter=setInterval(function(){a.y=a.y+a.speed,a.ele.css({top:a.y+"px"}),f.isCollision(a,a.view.player)?a.view.gameOver():a.y>=a.view.height&&a.destroy()},30)},d.prototype.destroy=function(){clearInterval(this.flyInter),this.ele.addClass("boom"),this.view.failed||(this.view.score+=this.score);var a=this;setTimeout(function(){a.ele.remove(),a.ele=null},500)},c.exports=d}),define("../js/dest/common",[],function(a,b,c){var d={};return d.isCollision=function(a,b){return a.x-b.width<b.x&&a.x+a.width>b.x&&b.y>a.y-b.height&&b.y<a.y+a.height?!0:!1},d});